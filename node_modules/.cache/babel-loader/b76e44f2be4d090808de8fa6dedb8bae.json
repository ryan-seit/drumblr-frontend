{"ast":null,"code":"var _jsxFileName = \"/Users/ryan/Documents/GitHub/drumblr_frontend/src/App.js\";\nimport React from 'react';\nimport MIDISounds from 'midi-sounds-react';\nimport SampleContainer from './SampleContainer';\nimport HeaderContainer from './HeaderContainer';\nimport NavBar from './NavBar';\nimport './css/App.css';\nexport default class App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      // just chose a default bpm to set state with\n      bpm: 120,\n      // I just hardcoded in some basic drums to start\n      drumObjs: [{\n        id: 3,\n        name: 'Bass Drum',\n        isPlaying: [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false]\n      }, {\n        id: 22,\n        name: 'Hand Clap',\n        isPlaying: [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false]\n      }, {\n        id: 26,\n        name: 'Snare',\n        isPlaying: [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false]\n      }, {\n        id: 35,\n        name: 'Closed Hi-hat',\n        isPlaying: [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false]\n      }]\n    };\n\n    this.playSequence = () => {\n      // gets array of notes with value of true\n      let notesToPlay = [];\n      let drums = [...this.state.drumObjs];\n\n      for (let i = 0; i < drums.length; i++) drums[i].isPlaying.filter((note, index) => {\n        if (note) {\n          let drum = drums[i].id;\n          let noteObj = {\n            sample: drum,\n            beatIndex: index\n          };\n          notesToPlay.push(noteObj);\n          return notesToPlay;\n        }\n      }, () => console.log(notesToPlay));\n\n      let bpm = this.state.bpm;\n      let beat = 4 * 60 / bpm;\n      let duration = beat / 16;\n      let time = this.midiSounds.contextTime();\n      notesToPlay.map(note => {\n        let noteTime = time + (duration + duration * note.beatIndex);\n        this.midiSounds.playDrumsAt(noteTime, [note.sample]);\n      }); // let noteTime = time + (duration + (duration * beatIndex))\n    };\n\n    this.sequenceThisNote = (sample, sampleIndex, beatIndex) => {\n      let bpm = this.state.bpm;\n      let beat = 4 * 60 / bpm;\n      let duration = beat / 16;\n      let time = this.midiSounds.contextTime();\n      let noteTime = time + (duration + duration * beatIndex); // this.midiSounds.playDrumsAt(noteTime, [sample])\n      // console.log(time, noteTime)\n      // console.log(sampleIndex, this.props.app.drumObjs[sampleIndex])\n    };\n\n    this.togglePlaying = (sampleIndex, beatIndex) => {\n      let updatedDrumObjs = [...this.state.drumObjs];\n      let updatedIsPlaying = updatedDrumObjs[sampleIndex].isPlaying;\n      updatedIsPlaying[beatIndex] = !updatedIsPlaying[beatIndex];\n      updatedDrumObjs[sampleIndex].isPlaying = [...this.state.drumObjs[sampleIndex].isPlaying];\n      this.setState({\n        drumObjs: updatedDrumObjs\n      }, () => {\n        console.log(this.state);\n      });\n    };\n\n    this.renderMIDISounds = () => {\n      return /*#__PURE__*/React.createElement(MIDISounds, {\n        ref: ref => this.midiSounds = ref,\n        appElementName: \"root\",\n        instruments: [3, 458],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 7\n        }\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"drumblr\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(HeaderContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(NavBar, {\n      playSequence: this.playSequence,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(SampleContainer, {\n      app: this.state,\n      togglePlaying: this.togglePlaying,\n      sequenceThisNote: this.sequenceThisNote,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"FooterContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }\n    })), this.renderMIDISounds());\n  }\n\n}","map":{"version":3,"sources":["/Users/ryan/Documents/GitHub/drumblr_frontend/src/App.js"],"names":["React","MIDISounds","SampleContainer","HeaderContainer","NavBar","App","Component","state","bpm","drumObjs","id","name","isPlaying","playSequence","notesToPlay","drums","i","length","filter","note","index","drum","noteObj","sample","beatIndex","push","console","log","beat","duration","time","midiSounds","contextTime","map","noteTime","playDrumsAt","sequenceThisNote","sampleIndex","togglePlaying","updatedDrumObjs","updatedIsPlaying","setState","renderMIDISounds","ref","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport MIDISounds from 'midi-sounds-react';\nimport SampleContainer from './SampleContainer';\nimport HeaderContainer from './HeaderContainer';\nimport NavBar from './NavBar';\nimport './css/App.css';\n\nexport default class App extends React.Component {\n\n  state = {\n    // just chose a default bpm to set state with\n    bpm: 120,\n    // I just hardcoded in some basic drums to start\n    drumObjs: [{\n        id: 3, \n        name: 'Bass Drum', \n        isPlaying: [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false],\n      }, {\n        id: 22, \n        name: 'Hand Clap', \n        isPlaying: [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false],\n      }, {\n        id: 26, \n        name: 'Snare', \n        isPlaying: [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false],\n      },{\n      id: 35, \n      name: 'Closed Hi-hat', \n      isPlaying: [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false, false],\n    }],\n  }\n\n  // playTheseNotes = () => {\n  //   let notesToPlay = []\n  //   let drums = [...this.state.drumObjs]\n  //   for (let i=0; i<drums.length; i++)\n  //     drums[i].isPlaying.filter((note, index )=> {\n  //       if (note){\n  //         let drum = drums[i].id\n  //         let noteObj = {sample: drum, beatIndex: index}          \n  //         notesToPlay.push(noteObj)\n  //         console.log(noteObj)\n  //         console.log(notesToPlay)\n  //         return notesToPlay\n  //       }\n  //     })\n  // }\n\n  playSequence = () => {\n\n    // gets array of notes with value of true\n    let notesToPlay = []\n    let drums = [...this.state.drumObjs]\n    for (let i=0; i<drums.length; i++)\n      drums[i].isPlaying.filter((note, index )=> {\n        if (note){\n          let drum = drums[i].id\n          let noteObj = {sample: drum, beatIndex: index}          \n          notesToPlay.push(noteObj)\n          return notesToPlay\n        }\n      }, () => console.log(notesToPlay))\n  \n    let bpm = this.state.bpm \n    let beat = 4 * 60 / bpm\n    let duration = beat/16\n    let time = this.midiSounds.contextTime()\n\n    notesToPlay.map(note => {\n      let noteTime = time + (duration + (duration * note.beatIndex))\n      this.midiSounds.playDrumsAt(noteTime, [note.sample])\n      \n    })\n    // let noteTime = time + (duration + (duration * beatIndex))\n\n  }\n\n  sequenceThisNote = (sample, sampleIndex, beatIndex) => {\n    let bpm = this.state.bpm \n    let beat = 4 * 60 / bpm\n    let duration = beat/16\n    let time = this.midiSounds.contextTime()\n    let noteTime = time + (duration + (duration * beatIndex))\n      \n    // this.midiSounds.playDrumsAt(noteTime, [sample])\n    // console.log(time, noteTime)\n    // console.log(sampleIndex, this.props.app.drumObjs[sampleIndex])\n}\n\n  togglePlaying = (sampleIndex, beatIndex) => {\n    let updatedDrumObjs = [...this.state.drumObjs]\n    let updatedIsPlaying = updatedDrumObjs[sampleIndex].isPlaying\n    updatedIsPlaying[beatIndex] = !updatedIsPlaying[beatIndex]\n    updatedDrumObjs[sampleIndex].isPlaying = [...this.state.drumObjs[sampleIndex].isPlaying]\n    this.setState({\n      drumObjs: updatedDrumObjs\n    }, () => {console.log(this.state)})\n  }\n\n  // render MIDISounds logo in order for samples to play when sequence is triggered\n  renderMIDISounds = () => {\n    return (\n      <MIDISounds \n      ref={(ref) => (this.midiSounds = ref)}\n      appElementName=\"root\" \n      instruments={[3, 458]}\n      />\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <div className=\"drumblr\">\n          <HeaderContainer />\n          <NavBar playSequence={this.playSequence}/>\n          <SampleContainer app={this.state} togglePlaying={this.togglePlaying} sequenceThisNote={this.sequenceThisNote}/>\n          <div className=\"FooterContainer\"></div>\n        </div>\n        {this.renderMIDISounds()}\n      </div>\n  );\n}\n}\n"]},"metadata":{},"sourceType":"module"}